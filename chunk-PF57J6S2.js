import{a as Y}from"./chunk-XGOX3SN4.js";import{e as Z}from"./chunk-UGCOLKFK.js";import"./chunk-IX6G3U3V.js";import{e as R,g as U,i as q,j as J,k as Q,l as X}from"./chunk-52FJKMHY.js";import{f as ee}from"./chunk-5LFWKQBG.js";import{w as j,y as K}from"./chunk-PA2UGYDV.js";import{Ab as _,Ac as k,Bb as w,Ca as W,Db as C,Eb as m,F as D,Nb as l,Ob as g,Rb as $,Sb as z,Tb as H,Vb as M,Xa as c,Xb as E,Ya as L,Yb as F,ha as v,j as P,ja as V,ka as G,nb as B,pb as N,sa as T,ta as S,ub as h,vb as p,wb as u,xb as f,yb as a,zb as s}from"./chunk-EL6EGBY3.js";var te=(()=>{let i=class i{constructor(){this.debounceTime=500,this.debounceClick=new W,this.clicks=new P}ngOnInit(){this.subscription=this.clicks.pipe(D(this.debounceTime)).subscribe(t=>this.debounceClick.emit(t))}ngOnDestroy(){this.subscription?.unsubscribe(),console.warn("unsubscribed from debounce directive")}clickEvent(t){t.preventDefault(),t.stopPropagation(),this.clicks.next(t)}};i.\u0275fac=function(n){return new(n||i)},i.\u0275dir=V({type:i,selectors:[["","appDebounceClick",""]],hostBindings:function(n,o){n&1&&C("click",function(x){return o.clickEvent(x)})},inputs:{debounceTime:"debounceTime"},outputs:{debounceClick:"debounceClick"},standalone:!0});let e=i;return e})();var ie=(()=>{let i=class i{transform(t){return new Array(t).fill(1)}};i.\u0275fac=function(n){return new(n||i)},i.\u0275pipe=G({name:"fill",type:i,pure:!0,standalone:!0});let e=i;return e})();function oe(e,i){if(e&1&&(a(0,"td"),l(1),s()),e&2){let r=i.$implicit,t=m().$implicit;c(),g(t.combination.items[r-1])}}function re(e,i){e&1&&l(0," no match ")}function ae(e,i){e&1&&(a(0,"li",3),l(1,"\u26AB"),s())}function se(e,i){e&1&&(a(0,"li",4),l(1,"\u26AA"),s())}function le(e,i){if(e&1&&(a(0,"tr")(1,"td",1),l(2),s(),u(3,oe,2,1,"td",null,p),B(5,re,1,0),a(6,"td",2),u(7,ae,2,0,"li",3,p),E(9,"fill"),u(10,se,2,0,"li",4,p),E(12,"fill"),s()()),e&2){let r=i.$implicit,t=i.$index,n=m();c(2),g(t+1),c(),f(n.util.numberArray(1,n.board.fields)),c(2),h(5,!r.correct&&!r.correctColors?5:-1),c(2),f(F(9,2,r.correct)),c(3),f(F(12,4,r.correctColors))}}function ce(e,i){e&1&&(a(0,"td"),l(1,"\xA0"),s())}function me(e,i){if(e&1&&(a(0,"tr")(1,"td"),l(2,"\xA0"),s(),u(3,ce,2,0,"td",null,p),a(5,"td"),l(6,"\xA0"),s()()),e&2){let r=m();c(3),f(r.util.numberArray(1,r.board.fields))}}function de(e,i){if(e&1&&(a(0,"option"),l(1),s()),e&2){let r=i.$implicit;c(),g(r)}}function pe(e,i){if(e&1){let r=w();a(0,"td")(1,"select",6),H("ngModelChange",function(n){let o=T(r).$implicit,b=m(2);return z(b.combination.items[o-1],n)||(b.combination.items[o-1]=n),S(n)}),u(2,de,2,1,"option",null,p),s()()}if(e&2){let r=i.$implicit,t=m(2);c(),$("ngModel",t.combination.items[r-1]),c(),f(t.util.numberArray(1,t.board.colors))}}function ue(e,i){if(e&1){let r=w();a(0,"tr")(1,"td"),l(2,"\xA0"),s(),u(3,pe,4,1,"td",null,p),a(5,"td")(6,"button",5),C("debounceClick",function(){T(r);let n=m();return S(n.onGuess())}),l(7,"Guess"),s()()()}if(e&2){let r=m();c(3),f(r.util.numberArray(1,r.board.fields)),c(3),N("debounceTime",1e3)}}function fe(e,i){if(e&1&&(a(0,"td"),l(1),s()),e&2){let r=i.$implicit,t=m(2);c(),g(t.board.secretCombination.items[r-1])}}function he(e,i){if(e&1&&(a(0,"tr")(1,"td"),l(2,"Secret"),s(),u(3,fe,2,1,"td",null,p),a(5,"td"),l(6,"\xA0"),s()()),e&2){let r=m();c(3),f(r.util.numberArray(1,r.board.fields))}}function _e(e,i){e&1&&(a(0,"tr")(1,"td",7),l(2,"Game lost"),s()())}function be(e,i){e&1&&(a(0,"tr")(1,"td",7),l(2,"Game won"),s()())}function Ce(e,i){if(e&1){let r=w();a(0,"div")(1,"button",8),C("click",function(){T(r);let n=m();return S(n.newGame())}),l(2,"Play again"),s()()}}var ne=(()=>{let i=class i{constructor(t){this.util=t,this.board={maxTries:7,fields:4,colors:6,guesses:[],secretCombination:{items:[]}},this.combination={items:[]},this.gameWon=!1,this.gameLost=!1,this.correct=[],this.letters=[],this.tally1=[],this.tally2=[],this.removeIndex=[],this.match=0,this.count=0}ngOnInit(){console.log("board view created"),this.board.secretCombination=this.createSecretCombination();for(let t=0;t<this.board.fields;t++)this.combination.items[t]=1}newGame(){console.log("board view created"),this.board.secretCombination=this.createSecretCombination();for(let t=0;t<this.board.fields;t++)this.combination.items[t]=1;this.board.maxTries=7,this.board.fields=4,this.board.colors=6,this.board.guesses=[],this.gameWon=!1,this.gameLost=!1}onGuess(){console.log("guessed",this.combination);var t=this.evaluateGuess(this.combination),n=(1+this.board.guesses.length).toString();t.correct==this.board.fields&&(this.gameWon=!0),this.board.guesses.push(t),!this.gameWon&&this.board.guesses.length==this.board.maxTries&&(this.gameLost=!0)}evaluateGuess(t){console.log("secret: ",this.board.secretCombination);var n={items:[]};this.match=0,this.count=0,this.letters=[];for(let d=0;d<this.board.fields;d++)n.items[d]=t.items[d],this.letters[d]=n.items[d],this.correct[d]=this.board.secretCombination.items[d];this.removeIndex=[],this.letters.forEach((d,O)=>{d==this.correct[O]&&(this.removeIndex.push(O),this.count++)}),this.removeArrayValues(this.letters,this.removeIndex),this.removeArrayValues(this.correct,this.removeIndex),console.log("after processing phase 1...black pegs = ",this.count),this.tally1=[],this.tally2=[];for(var o=1;o<1+this.board.colors;o++){for(var b=0,x=0,y=0;y<this.correct.length;y++)o==this.correct[y]&&b++,o==this.letters[y]&&x++;this.tally1.push(b),this.tally2.push(x)}for(var o=0;o<6;o++)this.tally1[o]&&this.tally2[o]&&(this.match++,console.log(this.tally1[o],this.tally2[o],o)),this.tally1[o]>1&&this.tally2[o]>1&&this.match++;var A={combination:n,correct:this.count,correctColors:this.match};return console.log("Guess:",A),A}createSecretCombination(){var t={items:[]};for(let n=0;n<this.board.fields;n++)t.items.push(this.randomNumber(this.board.colors));return t}randomNumber(t){return Math.floor(Math.random()*t)+1}removeArrayValues(t,n){n=n.sort();for(var o=n.length-1;o>=0;o--)t.splice(n[o],1);return t}};i.\u0275fac=function(n){return new(n||i)(L(ee))},i.\u0275cmp=v({type:i,selectors:[["board"]],standalone:!0,features:[M],decls:19,vars:5,consts:[["colspan","4"],[2,"color","red"],[1,"flex-container"],[2,"color","black"],[2,"color","white"],["appDebounceClick","","mat-raised-button","","color","primary",3,"debounceClick","debounceTime"],["size","6",2,"width","50px","font-size","20px",3,"ngModelChange","ngModel"],["colspan","6"],["mat-raised-button","","color","primary",3,"click"]],template:function(n,o){n&1&&(a(0,"table")(1,"tr")(2,"th"),l(3,"Try"),s(),a(4,"th",0),l(5,"Combination"),s(),a(6,"th"),l(7,"Result"),s()(),_(8,"tr"),u(9,le,13,6,"tr",null,p),u(11,me,7,0,"tr",null,p),B(13,ue,8,1,"tr")(14,he,7,0,"tr")(15,_e,3,0,"tr")(16,be,3,0,"tr"),s(),_(17,"br"),B(18,Ce,3,0,"div")),n&2&&(c(9),f(o.board.guesses),c(2),f(o.util.numberArray(o.board.guesses.length+1,o.board.maxTries)),c(2),h(13,!o.gameWon&&!o.gameLost?13:-1),c(),h(14,o.gameLost?14:-1),c(),h(15,o.gameLost?15:-1),c(),h(16,o.gameWon?16:-1),c(2),h(18,o.gameWon||o.gameLost?18:-1))},dependencies:[k,X,J,Q,q,R,U,K,j,Y,Z,te,ie],styles:[".flex-container[_ngcontent-%COMP%]{display:flex;background:gray;flex-direction:row;justify-content:left;padding:0;margin:1px;list-style:none;width:80px}@media only screen and (min-width: 1000px){.flex-container[_ngcontent-%COMP%]{width:135px}table[_ngcontent-%COMP%]{font-size:x-large}tr[_ngcontent-%COMP%]{line-height:30px}}"]});let e=i;return e})();var $e=(()=>{let i=class i{constructor(){this.title="mastermind"}};i.\u0275fac=function(n){return new(n||i)},i.\u0275cmp=v({type:i,selectors:[["app-mastermind"]],standalone:!0,features:[M],decls:11,vars:0,consts:[[1,"center"],["role","main",1,"content"]],template:function(n,o){n&1&&(_(0,"br"),a(1,"header")(2,"div",0),l(3,"Mastermind"),s()(),_(4,"br")(5,"br"),a(6,"div",1),_(7,"board"),a(8,"footer")(9,"h6"),l(10,"KSC - 21 Apr 2024 version"),s()()())},dependencies:[k,ne],styles:[".center[_ngcontent-%COMP%]{margin:auto;width:100%;font-size:20pt;text-align:center}@media only screen and (min-width: 1000px){.center[_ngcontent-%COMP%]{font-size:40pt}}",`.content[_ngcontent-%COMP%] {
      display: flex;
      
      flex-direction: column;
      align-items: center;
    }
  
    footer[_ngcontent-%COMP%] {
      margin-top: 8px;
      display: flex;
      align-items: center;
      line-height: 20px;
    }
  
    footer[_ngcontent-%COMP%]   a[_ngcontent-%COMP%] {
      display: flex;
      align-items: center;
    }`]});let e=i;return e})();export{$e as MastermindComponent};
