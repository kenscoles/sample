import{b as te}from"./chunk-ZCCIHBDX.js";import"./chunk-VN3CQEPZ.js";import{a as Y,b as $,c as q,d as H,e as J,f as K,g as Q,h as X}from"./chunk-INXXJYLV.js";import{b as G,f as W,h as U,m as R}from"./chunk-QYLBC67G.js";import{e as Z,f as ee}from"./chunk-EEOT6GOD.js";import{d as v}from"./chunk-WPRMUN4H.js";import{D as A}from"./chunk-6Y3XZJEB.js";import{l as P,m as z}from"./chunk-XROEINMK.js";import{$b as w,Ba as h,Db as s,Fb as I,Gb as T,Hb as i,Ib as o,Jb as g,Ob as y,Pb as f,Ya as b,_a as n,_b as a,ac as c,bc as L,da as S,dc as V,ec as B,fc as j,gc as D,hc as O,ic as F,jb as E,lc as N,mc as k,ob as p,yb as C,zc as _}from"./chunk-DQUIX7W4.js";var ne=e=>{let{capital:r,cca3:t,car:m,flags:l,borders:u,currencies:d,name:x,independent:ie,population:oe,timezones:ae,languages:le}=e,re=Object.values(x.nativeName)[0].common,M=Object.values(d)[0],me=Object.values(le);return{borders:u,capital:r,cca3:t,currency:{name:M.name,symbol:M.symbol},car:m,flags:l,independent:ie,langs:me,name:{common:x.common,native:re},population:oe,timezones:ae}};var ce=(e,r)=>r.code;function de(e,r){if(e&1&&(i(0,"mat-option",3),a(1),o()),e&2){let t=r.$implicit;C("value",t.code),n(),w(t.name)}}function se(e,r){e&1&&(i(0,"h3"),a(1,"Loading ... please wait"),o())}function pe(e,r){e&1&&a(0,"YES")}function ue(e,r){e&1&&a(0,"NO")}function he(e,r){if(e&1&&(i(0,"h2"),a(1),o()),e&2){f();let t=F(0);n(),c("Border(s): ",t.borders.join(", "),"")}}function Ce(e,r){if(e&1&&(D(0),i(1,"h2"),a(2),a(3),o(),i(4,"h2"),a(5),o(),i(6,"h2"),a(7,"Independent: "),p(8,pe,1,0)(9,ue,1,0),a(10),N(11,"number"),o(),i(12,"h2"),a(13),o(),i(14,"h2"),a(15),o(),i(16,"h2"),a(17),o(),p(18,he,2,1,"h2"),i(19,"h2"),a(20),o(),g(21,"p")),e&2){let t=O(f().countryData());n(2),c("Name: common - ",t.name.common," "),n(),c(`
native - `,t.name.native,""),n(2),c("Capital: ",t.capital.join(", "),""),n(3),s(t.independent?8:9),n(2),c(`
Population: `,k(11,12,t.population),""),n(3),c("Car: ",t.car.side," "),n(2),L("Currency: ",t.currency.name," ( ",t.currency.symbol," )"),n(2),c("Timezone(s): ",t.timezones.join(", "),""),n(),s(t.borders?18:-1),n(2),c("Language(s): ",t.langs.join(", "),"")}}function fe(e,r){e&1&&(i(0,"h3"),a(1,"No country found with this code"),o())}function ge(e,r){if(e&1&&g(0,"img",7),e&2){let t=f();C("src",t.countryData().flags.svg,b)}}var ke=(()=>{class e{constructor(){this.code=h("GB"),this.chosenCode=h("GB"),this.debounceSearchValue=ee(this.chosenCode,2e3),this.country=v(()=>`https://restcountries.com/v3.1/alpha/${this.code()}`),this.codes=v(()=>"https://restcountries.com/v3.1/all?fields=name,cca3"),this.selectedValue="GB",this.result=[],this.isCountryListBuilt=!1,this.countryData=h(""),this.util=S(Z),_(()=>{if(this.country.hasValue()){let t=ne(this.country.value()[0]);this.countryData.set(t),this.isCountryListBuilt||(console.log("select now built"),this.result=this.codes.value().map(m=>({code:m.cca3,name:m.name.common})),this.util.objsort(this.result,"name","asc"),this.isCountryListBuilt=!0)}}),_(()=>{this.code.set(this.debounceSearchValue())})}static{this.\u0275fac=function(m){return new(m||e)}}static{this.\u0275cmp=E({type:e,selectors:[["app-country"]],decls:18,vars:6,consts:[[1,"container"],["matInput","",3,"ngModelChange","ngModel"],["name","code",3,"ngModelChange","ngModel"],[3,"value"],[2,"display","inline"],[2,"width","70%","display","inline-block","float","left","margin-left","10px","margin-right","10px"],[2,"width","25%","display","inline-block"],[1,"flag",3,"src"]],template:function(m,l){m&1&&(i(0,"div",0)(1,"mat-form-field")(2,"mat-label"),a(3,"enter code"),o(),i(4,"input",1),y("ngModelChange",function(d){return l.chosenCode.set(d)}),o()(),i(5,"mat-form-field")(6,"mat-label"),a(7,"pick a country"),o(),i(8,"mat-select",2),j("ngModelChange",function(d){return B(l.selectedValue,d)||(l.selectedValue=d),d}),y("ngModelChange",function(){return l.chosenCode.set(l.selectedValue)}),I(9,de,2,2,"mat-option",3,ce),o()()(),i(11,"div",4)(12,"div",5),p(13,se,2,0,"h3")(14,Ce,22,14)(15,fe,2,0,"h3"),o(),i(16,"div",6),p(17,ge,1,1,"img",7),o()()),m&2&&(n(4),C("ngModel",l.chosenCode()),n(4),V("ngModel",l.selectedValue),n(),T(l.result),n(4),s(l.country.isLoading()?13:-1),n(),s(l.country.hasValue()?14:-1),n(),s(!l.country.isLoading()&&!l.country.hasValue()?15:-1),n(2),s(l.country.hasValue()?17:-1))},dependencies:[z,P,R,G,W,U,J,H,$,Y,A,q,X,Q,K,te],styles:["img[_ngcontent-%COMP%]{border:2px solid;margin:5px;width:30%}.container[_ngcontent-%COMP%]{margin:10px;width:40%;background-color:light-yellow}.flag[_ngcontent-%COMP%]{width:100%}"]})}}return e})();export{ke as CountryComponent};
