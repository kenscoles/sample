import{b as te}from"./chunk-ZCCIHBDX.js";import"./chunk-VN3CQEPZ.js";import{a as Y,b as q,c as H,d as J,e as K,f as Q,g as X,h as Z}from"./chunk-LK5M7DL5.js";import{b as A,f as G,h as U,m as W}from"./chunk-QYLBC67G.js";import{e as $,f as ee}from"./chunk-CZ7D5LTA.js";import{d as x}from"./chunk-WPRMUN4H.js";import{D as R}from"./chunk-6Y3XZJEB.js";import{l as k,m as z}from"./chunk-XROEINMK.js";import{$b as L,Ba as C,Db as s,Fb as P,Gb as w,Hb as o,Ib as a,Jb as _,Ob as f,Pb as p,Ya as O,_a as n,_b as l,ac as m,bc as T,da as S,dc as V,ec as I,fc as D,gc as B,hc as j,ic as y,jb as E,lc as F,mc as N,ob as u,yb as g,zc as M}from"./chunk-DQUIX7W4.js";var ne=e=>{let{capital:r,cca3:t,car:c,flags:i,borders:h,currencies:d,name:v,independent:ie,population:oe,timezones:ae,languages:le}=e,re=Object.values(v.nativeName)[0].common,b=Object.values(d)[0],ce=Object.values(le);return{borders:h,capital:r,cca3:t,currency:{name:b.name,symbol:b.symbol},car:c,flags:i,independent:ie,langs:ce,name:{common:v.common,native:re},population:oe,timezones:ae}};var me=(e,r)=>r.code;function de(e,r){if(e&1&&(o(0,"mat-option",6),l(1),a()),e&2){let t=r.$implicit;g("value",t.code),n(),L(t.name)}}function se(e,r){e&1&&(o(0,"h3"),l(1,"Loading ... please wait"),a())}function ue(e,r){e&1&&(o(0,"h3"),l(1,"No country found with this code"),a())}function pe(e,r){if(e&1&&l(0),e&2){p();let t=y(0);m(" (",t.name.native,") ")}}function he(e,r){e&1&&l(0,"YES")}function Ce(e,r){e&1&&l(0,"NO")}function ge(e,r){if(e&1&&(o(0,"h2"),l(1),a()),e&2){p();let t=y(0);n(),m("Border(s): ",t.borders.join(", "),"")}}function _e(e,r){if(e&1&&(B(0),o(1,"h2"),l(2),u(3,pe,1,1),a(),o(4,"h2"),l(5),a(),o(6,"h2"),l(7,"Independent: "),u(8,he,1,0)(9,Ce,1,0),_(10,"h2"),l(11),F(12,"number"),a(),o(13,"h2"),l(14),a(),o(15,"h2"),l(16),a(),o(17,"h2"),l(18),a(),u(19,ge,2,1,"h2"),o(20,"h2"),l(21),a()),e&2){let t=j(p().countryData());n(2),m("",t.name.common," "),n(),s(t.name.common!==t.name.native?3:-1),n(2),m("Capital: ",t.capital.join(", "),""),n(3),s(t.independent?8:9),n(3),m("Population: ",N(12,12,t.population),""),n(3),m("Drive on the : ",t.car.side," "),n(2),T("Currency: ",t.currency.name," ( ",t.currency.symbol," )"),n(2),m("Timezone(s): ",t.timezones.join(", "),""),n(),s(t.borders?19:-1),n(2),m("Language(s): ",t.langs.join(", "),"")}}function fe(e,r){if(e&1&&_(0,"img",8),e&2){let t=p();g("src",t.countryData().flags.svg,O)}}var ke=(()=>{class e{constructor(){this.code=C("GB"),this.chosenCode=C("GB"),this.debounceSearchValue=ee(this.chosenCode,2e3),this.country=x(()=>`https://restcountries.com/v3.1/alpha/${this.code()}`),this.codes=x(()=>"https://restcountries.com/v3.1/all?fields=name,cca3"),this.selectedValue="GB",this.result=[],this.isCountryListBuilt=!1,this.countryData=C(""),this.util=S($),M(()=>{if(this.country.hasValue()&&this.codes.hasValue()){let t=ne(this.country.value()[0]);this.countryData.set(t),this.isCountryListBuilt||(console.log("select now built"),this.result=this.codes.value().map(c=>({code:c.cca3,name:c.name.common})),this.util.objsort(this.result,"name","asc"),this.isCountryListBuilt=!0)}}),M(()=>{this.code.set(this.debounceSearchValue())})}static{this.\u0275fac=function(c){return new(c||e)}}static{this.\u0275cmp=E({type:e,selectors:[["app-country"]],decls:19,vars:6,consts:[[1,"row"],[1,"columnLeft"],[2,"width","100px"],["matInput","",3,"ngModelChange","ngModel"],[1,"divider"],["name","code",3,"ngModelChange","ngModel"],[3,"value"],[1,"columnRight"],[1,"flag",3,"src"]],template:function(c,i){c&1&&(o(0,"div",0)(1,"div",1)(2,"mat-form-field",2)(3,"mat-label"),l(4,"enter code"),a(),o(5,"input",3),f("ngModelChange",function(d){return i.chosenCode.set(d),i.selectedValue=d.toUpperCase()}),a()(),_(6,"div",4),o(7,"mat-form-field")(8,"mat-label"),l(9,"pick a country"),a(),o(10,"mat-select",5),D("ngModelChange",function(d){return I(i.selectedValue,d)||(i.selectedValue=d),d}),f("ngModelChange",function(){return i.chosenCode.set(i.selectedValue)}),P(11,de,2,2,"mat-option",6,me),a()(),o(13,"p"),u(14,se,2,0,"h3")(15,ue,2,0,"h3")(16,_e,22,14),a()(),o(17,"div",7),u(18,fe,1,1,"img",8),a()()),c&2&&(n(5),g("ngModel",i.chosenCode()),n(5),V("ngModel",i.selectedValue),n(),w(i.result),n(3),s(i.country.isLoading()?14:-1),n(),s(!i.country.isLoading()&&!i.country.hasValue()?15:-1),n(),s(i.country.hasValue()&&i.codes.hasValue()?16:-1),n(2),s(i.country.hasValue()&&i.countryData()?18:-1))},dependencies:[z,k,W,A,G,U,K,J,q,Y,R,H,Z,X,Q,te],styles:['*[_ngcontent-%COMP%]{box-sizing:border-box}.columnLeft[_ngcontent-%COMP%]{float:left;width:40%;padding:10px;margin:5%}.columnRight[_ngcontent-%COMP%]{float:right;width:40%;padding:10px;margin:5%}.row[_ngcontent-%COMP%]:after{content:"";display:table;clear:both}@media screen and (max-width: 600px){.columnLeft[_ngcontent-%COMP%], .columnRight[_ngcontent-%COMP%]{width:100%}h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], h4[_ngcontent-%COMP%], h5[_ngcontent-%COMP%], h6[_ngcontent-%COMP%]{margin:0;line-height:1.2}}img[_ngcontent-%COMP%]{border:2px solid;width:30%;display:block;margin:5px auto}.flag[_ngcontent-%COMP%]{width:50%}.divider[_ngcontent-%COMP%]{width:5px;height:auto;display:inline-block}']})}}return e})();export{ke as CountryComponent};
