import{c as A}from"./chunk-CISEWM54.js";import{b as ie}from"./chunk-ZCCIHBDX.js";import"./chunk-VN3CQEPZ.js";import"./chunk-2NQRG6LK.js";import{a as q,b as H,c as J,d as K,e as Q,f as X,g as Z,h as ee}from"./chunk-INXXJYLV.js";import{b as R,f as U,h as Y,m as $}from"./chunk-QYLBC67G.js";import{e as te,f as ne}from"./chunk-EEOT6GOD.js";import{d as v}from"./chunk-WPRMUN4H.js";import{B as G,D as W}from"./chunk-6Y3XZJEB.js";import{l as P,m as z}from"./chunk-XROEINMK.js";import{$b as T,Ba as C,Db as s,Fb as L,Gb as I,Hb as i,Ib as o,Jb as g,Ob as y,Pb as f,Ya as b,_a as n,_b as a,ac as c,bc as w,da as S,dc as B,ec as V,fc as k,gc as j,hc as D,ic as O,jb as E,lc as F,mc as N,ob as u,yb as p,zc as _}from"./chunk-DQUIX7W4.js";var oe=e=>{let{capital:l,cca3:t,car:m,flags:r,borders:h,currencies:d,name:x,independent:ae,population:re,timezones:le,languages:me}=e,ce=Object.values(x.nativeName)[0].common,M=Object.values(d)[0],de=Object.values(me);return{borders:h,capital:l,cca3:t,currency:{name:M.name,symbol:M.symbol},car:m,flags:r,independent:ae,langs:de,name:{common:x.common,native:ce},population:re,timezones:le}};var se=(e,l)=>l.code;function ue(e,l){if(e&1&&(i(0,"mat-option",4),a(1),o()),e&2){let t=l.$implicit;p("value",t.code),n(),T(t.name)}}function pe(e,l){e&1&&(i(0,"h3"),a(1,"Loading ... please wait"),o())}function he(e,l){e&1&&a(0,"YES")}function Ce(e,l){e&1&&a(0,"NO")}function fe(e,l){if(e&1&&(i(0,"h2"),a(1),o()),e&2){f();let t=O(0);n(),c("Border(s): ",t.borders.join(", "),"")}}function ge(e,l){if(e&1&&(j(0),i(1,"h2"),a(2),a(3),o(),i(4,"h2"),a(5),o(),i(6,"h2"),a(7,"Independent: "),u(8,he,1,0)(9,Ce,1,0),a(10),F(11,"number"),o(),i(12,"h2"),a(13),o(),i(14,"h2"),a(15),o(),i(16,"h2"),a(17),o(),u(18,fe,2,1,"h2"),i(19,"h2"),a(20),o(),g(21,"p")),e&2){let t=D(f().countryData());n(2),c("Name: common - ",t.name.common," "),n(),c(`
native - `,t.name.native,""),n(2),c("Capital: ",t.capital.join(", "),""),n(3),s(t.independent?8:9),n(2),c(`
Population: `,N(11,12,t.population),""),n(3),c("Car: ",t.car.side," "),n(2),w("Currency: ",t.currency.name," ( ",t.currency.symbol," )"),n(2),c("Timezone(s): ",t.timezones.join(", "),""),n(),s(t.borders?18:-1),n(2),c("Language(s): ",t.langs.join(", "),"")}}function ye(e,l){e&1&&(i(0,"h3"),a(1,"No country found with this code"),o())}function _e(e,l){if(e&1&&g(0,"img",8),e&2){let t=f();p("src",t.countryData().flags.svg,b)}}var Ge=(()=>{class e{constructor(){this.code=C("GB"),this.chosenCode=C("GB"),this.debounceSearchValue=ne(this.chosenCode,2e3),this.country=v(()=>`https://restcountries.com/v3.1/alpha/${this.code()}`),this.codes=v(()=>"https://restcountries.com/v3.1/all?fields=name,cca3"),this.selectedValue="GB",this.result=[],this.isCountryListBuilt=!1,this.countryData=C(""),this.util=S(te),_(()=>{if(this.country.hasValue()){let t=oe(this.country.value()[0]);this.countryData.set(t),this.isCountryListBuilt||(console.log("select now built"),this.result=this.codes.value().map(m=>({code:m.cca3,name:m.name.common})),this.util.objsort(this.result,"name","asc"),this.isCountryListBuilt=!0)}}),_(()=>{this.code.set(this.debounceSearchValue())})}static{this.\u0275fac=function(m){return new(m||e)}}static{this.\u0275cmp=E({type:e,selectors:[["app-country"]],decls:21,vars:7,consts:[[1,"container"],["mat-raised-button","",3,"routerLink"],["matInput","",3,"ngModelChange","ngModel"],["name","code",3,"ngModelChange","ngModel"],[3,"value"],[2,"display","inline"],[2,"width","70%","display","inline-block","float","left","margin-left","10px","margin-right","10px"],[2,"width","25%","display","inline-block"],[1,"flag",3,"src"]],template:function(m,r){m&1&&(i(0,"div",0)(1,"button",1),a(2," Back to Menu "),o()(),i(3,"div",0)(4,"mat-form-field")(5,"mat-label"),a(6,"enter code"),o(),i(7,"input",2),y("ngModelChange",function(d){return r.chosenCode.set(d)}),o()(),i(8,"mat-form-field")(9,"mat-label"),a(10,"pick a country"),o(),i(11,"mat-select",3),k("ngModelChange",function(d){return V(r.selectedValue,d)||(r.selectedValue=d),d}),y("ngModelChange",function(){return r.chosenCode.set(r.selectedValue)}),L(12,ue,2,2,"mat-option",4,se),o()()(),i(14,"div",5)(15,"div",6),u(16,pe,2,0,"h3")(17,ge,22,14)(18,ye,2,0,"h3"),o(),i(19,"div",7),u(20,_e,1,1,"img",8),o()()),m&2&&(n(),p("routerLink","/menu"),n(6),p("ngModel",r.chosenCode()),n(4),B("ngModel",r.selectedValue),n(),I(r.result),n(4),s(r.country.isLoading()?16:-1),n(),s(r.country.hasValue()?17:-1),n(),s(!r.country.isLoading()&&!r.country.hasValue()?18:-1),n(2),s(r.country.hasValue()?20:-1))},dependencies:[A,z,P,$,R,U,Y,Q,K,H,q,W,G,J,ee,Z,X,ie],styles:["img[_ngcontent-%COMP%]{border:2px solid;margin:5px;width:30%}.container[_ngcontent-%COMP%]{margin:10px;width:40%;background-color:light-yellow}.flag[_ngcontent-%COMP%]{width:100%}"]})}}return e})();export{Ge as CountryComponent};
